"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[549],{5549:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var i=n(9439),a=n(2791),o=n(923),r=n(5794),s=n(1610),l=n(7762),c=n(3433),u=n(4554),d=n(1889),p=n(1910),h=n(5764),f=n(5558),g=n(8074),m=n(225),x=n(242),v=n(184),Z=(0,m.Z)(u.Z)({display:"flex",flexWrap:"wrap",alignItems:"center",minHeight:"250px",position:"relative"}),y=(0,m.Z)("div")({height:"250px",flexGrow:999999}),w=(0,m.Z)(u.Z)({height:"250px",borderRadius:"2px",flexGrow:1,flexBasis:0,margin:2,position:"relative",overflow:"hidden",cursor:"pointer"}),j=(0,m.Z)(x.j)({height:"250px",minWidth:"100%",position:"absolute",objectFit:"cover",transitionDuration:"300ms",transform:"scale3d(1.00, 1.00, 1)","&:hover":{transitionDuration:"200ms",transform:"scale3d(1.03, 1.03, 1)"}}),b=((0,m.Z)(u.Z)({position:"absolute",height:"100%",width:"100%",outlineWidth:"5px",outlineStyle:"solid",outlineOffset:"-5px",outlineColor:"rgb(78 0 179 / 50%)",zIndex:1,alignItems:"center",justifyContent:"center",pointerEvents:"none"}),(0,m.Z)(u.Z)({position:"absolute",top:10,left:10}));var M=function(e){var t=e.mediaData,n=(0,a.useState)(!1),o=(0,i.Z)(n,2),r=o[0],s=o[1],l=function(){return t.MediaType.IsRaw?(0,v.jsx)(b,{children:(0,v.jsx)(p.Z,{sx:{bgcolor:"rgb(255, 255, 255, 0.40)",borderRadius:"3px"}})}):t.MediaType.IsVideo?(0,v.jsx)(b,{children:(0,v.jsx)(f.Z,{sx:{bgcolor:"rgb(255, 255, 255, 0.40)",borderRadius:"3px"}})}):(0,v.jsx)(b,{children:(0,v.jsx)(h.Z,{sx:{bgcolor:"rgb(255, 255, 255, 0.40)",borderRadius:"3px"}})})},c=t.Filepath.substring(t.Filepath.lastIndexOf("/")+1);return(0,v.jsxs)(u.Z,{width:"100%",height:"100%",children:[(0,v.jsx)(l,{}),(0,v.jsx)(u.Z,{width:"95%",height:"max-content",bottom:10,left:10,position:"absolute",children:(0,v.jsx)(g.j,{label:r?"Copied":c,success:r,onClick:function(e){e.stopPropagation(),navigator.clipboard.writeText(c),function(e){e(!0),setTimeout((function(){return e(!1)}),1e3)}(s)}})})]})},C=(0,a.memo)((function(e){var t=e.mediaData,n=e.showIcons,i=e.dispatch,o=(0,a.useRef)();t.ImgRef=o;var r=t.ThumbWidth*(250/t.ThumbHeight);return(0,v.jsxs)(w,{ref:o,minWidth:"clamp(100px, ".concat(r,"px, 100% - 8px)"),maxWidth:"".concat(1.5*r,"px"),onClick:function(){return i({type:"set_presentation",presentingHash:t.FileHash})},children:[(0,v.jsx)(j,{mediaData:t,quality:"thumbnail",lazy:!0}),n&&(0,v.jsx)(M,{mediaData:t})]})}),(function(e,t){return e.mediaData.FileHash==t.mediaData.FileHash&&e.showIcons==t.showIcons})),k=function(e){var t=e.medias,n=e.showIcons,i=e.dispatch,o=(0,a.useMemo)((function(){return t.map((function(e){return 1==!e.Display?null:(0,v.jsx)(C,{mediaData:e,showIcons:n,dispatch:i},e.FileHash)}))}),[(0,c.Z)(t),n]);return(0,v.jsxs)(Z,{children:[o,(0,v.jsx)(y,{})]})},H=function(e){var t=e.dateTime,n=new Date(t).toUTCString().split(" 00:00:00 GMT")[0];return(0,v.jsx)(u.Z,{component:"h3",fontSize:25,pl:1,fontFamily:"Roboto,RobotoDraft,Helvetica,Arial,sans-serif",marginBottom:1,children:n},"".concat(n," title"))},D=function(e){var t=e.date,n=e.bucketData,i=e.showIcons,a=e.dispatch;return function(){var e,t=(0,l.Z)(n);try{for(t.s();!(e=t.n()).done;){if(e.value.Display)return!0}}catch(i){t.e(i)}finally{t.f()}return!1}()?(0,v.jsxs)(d.ZP,{item:!0,children:[(0,v.jsx)(H,{dateTime:t}),(0,v.jsx)(k,{medias:n,showIcons:i,dispatch:a})]}):null},I=n(1413),_=n(4165),S=n(5861);function R(){return(R=(0,S.Z)((0,_.Z)().mark((function e(t,n){var a,o,r,s,c,u,d,p,h,f,g,m,x,v,Z;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=(0,I.Z)({},t.mediaMap),o=(0,I.Z)({},t.dateMap),r=t.previousLast,!((s=t.maxMediaCount-t.mediaCount)<1)){e.next=8;break}return s<0&&console.error("maxMediaCount (".concat(t.maxMediaCount,") less than mediaCount ").concat(t.mediaCount)),e.abrupt("return");case 8:return(c=new URL("".concat(window.location.origin,"/api/media"))).searchParams.append("limit",s.toString()),c.searchParams.append("skip",t.mediaCount.toString()),c.searchParams.append("raw",t.includeRaw.toString()),e.next=14,fetch(c.toString()).then((function(e){return e.json()}));case 14:if(u=e.sent,d=u.Media,null!=u.Media){p=u.MoreMedia,h=(0,l.Z)(d.entries());try{for(h.s();!(f=h.n()).done;)g=(0,i.Z)(f.value,2),g[0],m=g[1],a[m.FileHash]=m,r&&(a[m.FileHash].previous=a[r],a[r].next=a[m.FileHash]),r=m.FileHash,x=m.CreateDate.split("T"),v=(0,i.Z)(x,2),Z=v[0],v[1],null==o[Z]?o[Z]=[m]:o[Z].push(m)}catch(y){h.e(y)}finally{h.f()}}else p=!1;n({type:"add_media",mediaMap:a,dateMap:o,hasMoreMedia:p,previousLast:r,addedCount:(null===d||void 0===d?void 0:d.length)||0}),e.next=24;break;case 20:throw e.prev=20,e.t0=e.catch(0),console.error(e.t0),new Error("Error fetching data - Ethan you wrote this, its not a js err");case 24:case"end":return e.stop()}}),e,null,[[0,20]])})))).apply(this,arguments)}function T(e,t){switch(t.type){case"add_media":return(0,I.Z)((0,I.Z)({},e),{},{mediaMap:t.mediaMap,dateMap:t.dateMap,hasMoreMedia:t.hasMoreMedia,previousLast:t.previousLast,mediaCount:e.mediaCount+t.addedCount});case"insert_thumbnail":return e.mediaMap[t.hash].Thumbnail64=t.thumb64,(0,I.Z)({},e);case"set_scan_progress":return(0,I.Z)((0,I.Z)({},e),{},{scanProgress:t.progress});case"insert_fullres":return e.mediaMap[t.hash].Fullres64=t.fullres64,(0,I.Z)({},e);case"inc_max_media_count":return e.loading||e.maxMediaCount>e.mediaCount?(0,I.Z)({},e):(0,I.Z)((0,I.Z)({},e),{},{maxMediaCount:e.maxMediaCount+t.incBy});case"set_loading":return(0,I.Z)((0,I.Z)({},e),{},{loading:t.loading});case"toggle_info":return(0,I.Z)((0,I.Z)({},e),{},{showIcons:!e.showIcons});case"toggle_raw":return window.scrollTo({top:0,behavior:"smooth"}),(0,I.Z)((0,I.Z)({},e),{},{mediaMap:{},dateMap:{},mediaCount:0,maxMediaCount:100,previousLast:"",includeRaw:!e.includeRaw});case"set_search":return(0,I.Z)((0,I.Z)({},e),{},{searchContent:t.search});case"set_presentation":return console.log("Setting: ",t.presentingHash),document.documentElement.style.overflow="hidden",(0,I.Z)((0,I.Z)({},e),{},{presentingHash:t.presentingHash});case"presentation_next":var n,i,a;console.log("Here1");var o=0;return null!==(n=e.mediaMap[e.presentingHash])&&void 0!==n&&null!==(i=n.next)&&void 0!==i&&i.next||!e.hasMoreMedia||e.loading||e.maxMediaCount>e.mediaCount||(o=100),(0,I.Z)((0,I.Z)({},e),{},{maxMediaCount:e.maxMediaCount+o,presentingHash:null!==(a=e.mediaMap[e.presentingHash])&&void 0!==a&&a.next?e.mediaMap[e.presentingHash].next.FileHash:e.presentingHash});case"presentation_previous":return(0,I.Z)((0,I.Z)({},e),{},{presentingHash:e.mediaMap[e.presentingHash].previous?e.mediaMap[e.presentingHash].previous.FileHash:e.presentingHash});case"stop_presenting":if(""==e.presentingHash)return(0,I.Z)({},e);document.documentElement.style.overflow="visible";try{e.mediaMap[e.presentingHash].ImgRef.current.scrollIntoView({behavior:"smooth",block:"center"})}catch(r){console.log("No img ref: ",e.presentingHash)}return(0,I.Z)((0,I.Z)({},e),{},{presentingHash:""});default:console.error("Do not have handler for dispatch type",t.type)}}function F(e){document.documentElement.scrollHeight-(document.documentElement.scrollTop+window.innerHeight)<1500&&e({type:"inc_max_media_count",incBy:100})}function z(e,t){e.loading||(t({type:"set_loading",loading:!0}),function(e,t){return R.apply(this,arguments)}(e,t).then((function(){return t({type:"set_loading",loading:!1})})))}var E=n(1614),L=n(6151),P=n(4395),W=n(4663),O=n(7482),q=n(388),A=n(5584),N=n(5552),U=n(3768),B=(0,m.Z)(u.Z)({display:"flex",flexWrap:"wrap",flexDirection:"column",marginTop:"50px",gap:"25px",alignContent:"center"}),G=function(){return(0,v.jsxs)(B,{children:["No media to display",(0,v.jsx)(L.Z,{children:"Upload Media"})]})},J=function(e){var t=e.rawSelected,n=e.showIcons,i=e.dispatch;return(0,v.jsx)(P.Z,{position:"sticky",color:"transparent",sx:{width:"fit-content",height:"fit-content",padding:"25px",boxShadow:0,zIndex:2},children:(0,v.jsxs)(W.Z,{style:{padding:0,flexDirection:"column"},children:[(0,v.jsx)(U.Z,{title:"Toggle RAW Images",placement:"right",children:(0,v.jsx)(q.Z,{value:"RAW",selected:t,onChange:function(){i({type:"toggle_raw"})},style:{backgroundColor:"white"},children:(0,v.jsx)(p.Z,{})})}),(0,v.jsx)(U.Z,{title:"Toggle Media Info",placement:"right",children:(0,v.jsx)(q.Z,{value:"INFO",selected:n,onChange:function(){i({type:"toggle_info"})},style:{backgroundColor:"white"},children:(0,v.jsx)(A.Z,{})})})]})})},V=function(e){var t=e.items,n=e.itemCount,i=e.loading,a=e.moreItems;return(0,v.jsxs)(u.Z,{flexDirection:"column",pb:10,width:"90vw",children:[t,0==n&&!i&&(0,v.jsx)(G,{}),!a&&(0,v.jsx)("p",{style:{textAlign:"center",paddingTop:"90px"},children:"Wow, you scrolled this whole way?"})]})},K=function(){var e=(0,N.Ds)().enqueueSnackbar,t=(0,s.Z)(e),n=t.wsSend,l=t.lastMessage,c=(t.readyState,(0,a.useReducer)(T,{mediaMap:{},mediaCount:0,maxMediaCount:100,hasMoreMedia:!0,presentingHash:"",previousLast:"",includeRaw:!1,showIcons:!1,loading:!1,scanProgress:0,searchContent:""})),d=(0,i.Z)(c,2),p=d[0],h=d[1];(0,a.useEffect)((function(){z(p,h)}),[p.maxMediaCount,p.includeRaw]),(0,a.useEffect)((function(){window.addEventListener("scroll",(function(e){F(h)}),!1)}),[]),(0,a.useEffect)((function(){if(l){var t=JSON.parse(l.data);switch(t.type){case"new_items":return void h({type:"append_items",items:t.content});case"scan_directory_progress":return h({type:"set_scan_progress",progress:100*(1-t.remainingTasks/t.totalTasks)}),void console.log(t.remainingTasks,"/",t.totalTasks);case"finished":return void h({type:"set_loading",loading:!1});case"refresh":return;case"error":return void e(t.error,{variant:"error"});default:return void console.error("Got unexpected websocket message: ",t)}}}),[l]);var f=(0,a.useMemo)((function(){for(var e={},t=0,n=Object.values(p.mediaMap);t<n.length;t++){var a=n[t],o=a.CreateDate.split("T"),r=(0,i.Z)(o,2),s=r[0];r[1];null==e[s]?e[s]=[a]:e[s].push(a)}return e}),[p.mediaMap]),g=(0,a.useMemo)((function(){F(h);for(var e=0,t=Object.values(p.mediaMap);e<t.length;e++){var n=t[e],i=0;n.Filepath.includes(p.searchContent)?(i+=1,n.Display=!0):n.Display=!1}return i}),[f,p.searchContent]),m=(0,a.useMemo)((function(){return f?Object.keys(f).map((function(e,t){return(0,v.jsx)(D,{date:e,bucketData:f[e],showIcons:p.showIcons,dispatch:h},e)})):[]}),[f,p.showIcons,p.searchContent,g]);return(0,v.jsxs)(u.Z,{children:[(0,v.jsx)(o.Z,{dispatch:h,wsSend:n,page:"gallery"}),p.loading&&(0,v.jsxs)(u.Z,{sx:{width:"100%"},children:[0==p.scanProgress&&(0,v.jsx)(O.Z,{}),0!=p.scanProgress&&(0,v.jsxs)(u.Z,{sx:{width:"100%"},children:[(0,v.jsx)(O.Z,{variant:"determinate",value:p.scanProgress}),(0,v.jsx)("p",{style:{position:"absolute",left:"6vw"},children:"Syncing filesystem with database..."})]})]}),(0,v.jsxs)(E.Z,{maxWidth:!1,style:{display:"flex",flexDirection:"row",justifyContent:"center",paddingLeft:"0px",paddingTop:"25px",paddingRight:""==p.presentingHash?"55px":"71px"},children:[""!=p.presentingHash&&(0,v.jsx)(r.Z,{mediaData:p.mediaMap[p.presentingHash],dispatch:h}),(0,v.jsx)(J,{rawSelected:p.includeRaw,showIcons:p.showIcons,dispatch:h}),(0,v.jsx)(V,{items:m,itemCount:p.mediaCount,loading:p.loading,moreItems:p.hasMoreMedia})]})]})}},6133:function(e,t,n){var i=n(7762),a=function(e,t,n){console.log("Inside!"),n(JSON.stringify({type:"file_upload",content:{path:t,file:e}}))};function o(e){return new Promise((function(t,n){var i=new FileReader;i.onload=function(){console.log("HERE"),t({name:e.name,item64:i.result})},i.onerror=function(){n(i)},i.readAsDataURL(e)}))}t.Z=function(e,t,n){var r,s=(0,i.Z)(e);try{for(s.s();!(r=s.n()).done;){var l=r.value;l.size>2e9&&console.log("This upload is going to fail"),o(l).then((function(e){return a(e,t,n)}))}}catch(c){s.e(c)}finally{s.f()}}},1610:function(e,t,n){n.d(t,{Z:function(){return s},y:function(){return l}});var i=n(9439),a=n(2791),o=n(9829),r=n(5552);function s(e){var t="ws://".concat(window.location.host,"/api/ws"),n=(0,a.useState)(null),s=(0,i.Z)(n,2),l=s[0],c=s[1],u=(0,a.useState)(null),d=(0,i.Z)(u,2),p=d[0],h=d[1],f=(0,o.ZP)(t,{onOpen:function(){clearTimeout(l),p&&((0,r.sy)(p),e("Websocket reconnected",{variant:"success"}),h(null)),console.log("WebSocket connection established.")},onClose:function(){p||l||c(setTimeout((function(){h(e("No connection to websocket, retrying...",{variant:"error",persist:!0,preventDuplicate:!0}))}),2e3))},reconnectAttempts:25,reconnectInterval:function(e){return 1e3*(2^e)},shouldReconnect:function(){return!0},onReconnectStop:function(){clearTimeout(l),(0,r.sy)(p),h(e("Unable to connect websocket. Please refresh your page",{variant:"error",persist:!0,preventDuplicate:!0}))}}),g=f.sendMessage;return{wsSend:function(e){g(e)},lastMessage:f.lastMessage,readyState:f.readyState}}function l(e,t,n){console.log("Doing sync"),t(JSON.stringify({type:"scan_directory",content:{path:e,recursive:n}}))}},8074:function(e,t,n){n.d(t,{j:function(){return p}});var i=n(9439),a=n(7762),o=n(1918),r=n(7107),s=n(2065),l=n(3517),c=n(4554),u=n(184),d=(0,r.Z)({palette:{primary:{main:"#1976d2",contrastText:"white"}},typography:{fontWeightRegular:"12px"}}),p=function(e){var t,n=e.label,i=e.success,a=e.onClick;return t=i?"rgb(0, 255, 0)":"rgb(230, 230, 230)",(0,u.jsx)(c.Z,{height:"max-content",width:"100%",onClick:a,sx:{cursor:"pointer"},children:(0,u.jsx)(o.Z,{label:n,sx:{width:"100%",backgroundColor:t,height:25,color:"white",fontWeight:d.typography.fontWeightRegular,"&:hover, &:focus":{backgroundColor:(0,s._4)(t,.1)},"&:active":{boxShadow:d.shadows[1],backgroundColor:(0,s._4)(t,.12)}}})})};t.Z=function(e){var t=e.path,n=e.includeHome,o=e.navigate;if(!t)return null;try{for(var r=(t=t.slice(1)).split("/");""==r[r.length-1];)r.pop();n&&r.unshift("/");var s,c=r.pop(),d=[],h=(0,a.Z)(r.entries());try{for(h.s();!(s=h.n()).done;){var f=(0,i.Z)(s.value,2),g=f[0],m=f[1];0==g&&n?d.push("/"):d.push(d[g-1]+"/"+m)}}catch(v){h.e(v)}finally{h.f()}var x=r.map((function(e,t){return(0,u.jsx)(p,{label:"/"==e?"Home":e,success:!1,onClick:function(){o("/files/".concat(d[t]).replace(/\/\/+/g,"/"))}},e)}));return x.push((0,u.jsx)(p,{label:"/"==c?"Home":c,success:!1,onClick:function(){}},c)),(0,u.jsx)(l.Z,{separator:"\u203a",children:x})}catch(v){return console.log(v),null}}},923:function(e,t,n){var i=n(9439),a=n(4942),o=n(2791),r=n(4395),s=n(4663),l=n(3400),c=n(9013),u=n(1799),d=n(6488),p=n(4554),h=n(3717),f=n(5456),g=n(3768),m=n(7689),x=n(6133),v=n(1610),Z=n(6934),y=n(2065),w=n(6098),j=n(5403),b=n(1600),M=n(184),C=(0,Z.ZP)("div")((function(e){var t=e.theme;return(0,a.Z)({position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:(0,y.Fq)(t.palette.common.white,.15),"&:hover":{backgroundColor:(0,y.Fq)(t.palette.common.white,.25)},marginLeft:0,width:"100%"},t.breakpoints.up("sm"),{marginLeft:t.spacing(1),width:"auto"})})),k=(0,Z.ZP)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),H=(0,Z.ZP)(w.ZP)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":(0,a.Z)({padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}})),D=(0,o.memo)((function(e){var t=e.dispatch,n=e.wsSend,a=e.page,o=(0,b.Z)(["weblens-login-token"]),Z=(0,i.Z)(o,3),y=(Z[0],Z[1],Z[2]),w=(0,m.s0)(),D=((0,m.UO)()["*"]+"/").replace(/\/\/+/g,"/");return"gallery"==a&&(D="/"),(0,M.jsx)(p.Z,{sx:{flexGrow:1},zIndex:1,pt:1,maxWidth:"100vw",children:(0,M.jsx)(r.Z,{position:"static",color:"transparent",style:{boxShadow:"none"},children:(0,M.jsxs)(s.Z,{style:{paddingLeft:"25px"},children:["gallery"==a&&(0,M.jsx)(g.Z,{title:"Files",children:(0,M.jsx)(l.Z,{href:"/files/",edge:"start",color:"inherit","aria-label":"files",style:{margin:10,flexDirection:"column",fontSize:20},children:(0,M.jsx)(h.Z,{})})}),"files"==a&&(0,M.jsx)(g.Z,{title:"Gallery",children:(0,M.jsx)(l.Z,{href:"/",edge:"start",color:"inherit","aria-label":"files",style:{margin:15,flexDirection:"column",fontSize:20},children:(0,M.jsx)(f.Z,{})})}),(0,M.jsx)(g.Z,{title:"Sync",children:(0,M.jsx)(l.Z,{onClick:function(){t({type:"set_loading",loading:!0}),(0,v.y)(D,n,!0)},edge:"start",color:"inherit","aria-label":"upload",style:{margin:10,flexDirection:"column",fontSize:20},children:(0,M.jsx)(u.Z,{})})}),(0,M.jsx)(g.Z,{title:"Upload",children:(0,M.jsxs)(l.Z,{edge:"start",color:"inherit","aria-label":"upload",style:{margin:10,flexDirection:"column",fontSize:20},children:[(0,M.jsx)("input",{id:"upload-image",hidden:!0,accept:"image/*",type:"file",onChange:function(e){return(0,x.Z)(e.target.files[0],"/",null)}}),(0,M.jsx)(c.Z,{})]})}),(0,M.jsxs)(C,{children:[(0,M.jsx)(k,{children:(0,M.jsx)(j.Z,{})}),(0,M.jsx)(H,{placeholder:"Search\u2026",inputProps:{"aria-label":"search"},onChange:function(e){return t({type:"set_search",search:e.target.value})}})]}),(0,M.jsx)(g.Z,{title:"Logout",children:(0,M.jsx)(l.Z,{edge:"end",color:"inherit","aria-label":"logout",style:{margin:10,flexDirection:"column",fontSize:20},onClick:function(){y("weblens-login-token"),w("/login")},children:(0,M.jsx)(d.Z,{})})})]})})})}));t.Z=D},242:function(e,t,n){n.d(t,{j:function(){return g}});var i=n(1413),a=n(5987),o=n(9439),r=n(2791),s=n(5218),l=n(4554),c=n(3239),u=n(225),d=n(184),p=["mediaData","quality","lazy"],h=(0,u.Z)(l.Z)({top:0,left:0,height:"100%",width:"100%",display:"flex",position:"absolute",justifyContent:"center",overflow:"hidden",objectFit:"contain"}),f=(0,u.Z)(c.Z)({position:"absolute",zIndex:1,bottom:"10px",right:"10px",color:"rgb(255, 255, 255)"});var g=function(e){var t=e.mediaData,n=e.quality,l=e.lazy,c=(0,a.Z)(e,p),u=(0,r.useState)(!1),g=(0,o.Z)(u,2),m=g[0],x=g[1],v=(0,r.useRef)(),Z=function(e){var t=(0,r.useState)(!1),n=(0,o.Z)(t,2),i=n[0],a=n[1];return(0,r.useEffect)((function(){var t=new IntersectionObserver((function(e){var t=(0,o.Z)(e,1)[0];a(t.isIntersecting)}),{rootMargin:"1000px"});return t.observe(e.current),function(){t.disconnect()}}),[e]),i}(v),y=new URL("".concat(window.location.origin,"/api/item/").concat(t.FileHash));return y.searchParams.append(n,"true"),(0,d.jsxs)(h,{ref:v,children:[!m&&(0,d.jsx)(f,{size:20}),(0,d.jsx)("img",(0,i.Z)((0,i.Z)({height:"100%",width:"100%",loading:l?"lazy":"eager"},c),{},{src:y.toString(),style:{position:"absolute",display:Z?"block":"none"},onLoad:function(){x(!0)}})),t.BlurHash&&l&&!m&&(0,d.jsx)(s.E,{style:{position:"absolute"},height:250,width:550,hash:t.BlurHash})]})}},5794:function(e,t,n){var i=n(2791),a=n(4554),o=n(3400),r=n(9823),s=n(225),l=n(9885),c=n(8074),u=n(242),d=n(184),p=(0,s.Z)(a.Z)({position:"fixed",display:"flex",justifyContent:"center",alignItems:"center",color:"white",top:0,left:0,padding:"25px",height:"calc(100vh - 50px)",width:"calc(100vw - 50px)",zIndex:3,backgroundColor:"rgb(0, 0, 0, 0.92)"}),h=(0,s.Z)(u.j)({height:"calc(100% - 40px)",width:"calc(100% - 40px)",objectFit:"contain",margin:"20px"}),f=function(e){var t,n=e.mediaData;return n?n.MediaType.IsVideo?(0,d.jsx)(h,{mediaData:n,quality:"thumbnail",lazy:!1},"".concat(n.FileHash," thumbnail")):"File"==(null===(t=n.MediaType)||void 0===t?void 0:t.FriendlyName)?(0,d.jsx)(l.Z,{style:{width:"80%",height:"80%"},onDragOver:function(){}}):(0,d.jsxs)("div",{style:{height:"100%",width:"100%"},children:[(0,d.jsx)(h,{mediaData:n,quality:"thumbnail",lazy:!1},"".concat(n.FileHash," thumbnail")),(0,d.jsx)(h,{mediaData:n,quality:"fullres",lazy:!1},"".concat(n.FileHash," fullres"))]}):void 0};t.Z=function(e){var t=e.mediaData,n=e.dispatch;return(0,i.useEffect)((function(){return function(e){console.log("AHH");var t=function(t){"Escape"===t.key&&(t.preventDefault(),e({type:"stop_presenting"})),"ArrowLeft"===t.key&&(t.preventDefault(),e({type:"presentation_previous"})),"ArrowRight"===t.key&&(t.preventDefault(),e({type:"presentation_next"}))};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}(n)}),[]),(0,d.jsxs)(p,{children:[(0,d.jsx)(f,{mediaData:t}),(0,d.jsx)(o.Z,{onClick:function(){return n({type:"stop_presenting"})},color:"inherit",sx:{display:"block",position:"absolute",top:15,left:15,cursor:"pointer",zIndex:100},children:(0,d.jsx)(r.Z,{})}),(0,d.jsx)(a.Z,{position:"absolute",top:10,children:(0,d.jsx)(c.Z,{path:null===t||void 0===t?void 0:t.Filepath,includeHome:!1,navigate:function(){}})})]})}}}]);
//# sourceMappingURL=549.dcfdbf3f.chunk.js.map